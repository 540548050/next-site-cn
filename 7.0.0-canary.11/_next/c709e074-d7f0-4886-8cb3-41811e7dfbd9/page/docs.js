module.exports=__NEXT_REGISTER_PAGE("/docs",function(){var e=webpackJsonp([2],{220:function(e,n,a){e.exports=a(221)},221:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:true});var t=a(0);var o=a.n(t);var r=a(222);var m=a.n(r);var l={title:"快速开始",description:"创建Next.js项目",date:"2018-08-27T02:09:35.275Z",url:" http://nextjs.frontendx.cn/docs/getting-started/setup",link:"/docs/getting-started/setup"};var c=function(e){var n=e.components;return o.a.createElement(r["MDXTag"],{name:"wrapper"},o.a.createElement(r["MDXTag"],{name:"h3",components:n},"安装"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"安装它:"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-bash"]}},"npm install --save next react react-dom\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"将下面脚本添加到 package.json 中:"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "scripts": {\n    "dev": "next",\n    "build": "next build",\n    "start": "next start"\n  }\n}\n')),o.a.createElement(r["MDXTag"],{name:"blockquote",components:n},o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"blockquote"},"Next.js 只支持",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://reactjs.org/blog/2017/09/26/react-v16.0.html"}},"React 16"),".",o.a.createElement("br",null),"由于我们使用 React 16 的特性，所以不得不放弃对 React 15 以及以下版本的支持.")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"下面, 文件系统是主要的 API. 每个",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".js")," 文件将变成一个路由，自动处理和渲染。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"新建 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"./pages/index.js")," 到你的项目中:"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"export default () => <div>Welcome to next.js!</div>\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"运行 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"npm run dev")," 命令并打开 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"http://localhost:3000"),"。 如果你想使用其他端口，可运行 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"npm run dev -- -p <设置端口号>"),"."),o.a.createElement(r["MDXTag"],{name:"p",components:n},"目前为止我们可以了解到:"),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"自动打包编译 (使用 webpack 和 babel)"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"热加载"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"以 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"./pages"),"作为服务端的渲染和索引"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"Static file serving. ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"./static/")," is mapped to ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"/static/")," (given you ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"#static-file-serving-eg-images"}},"create a ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"a"},"./static/")," directory")," inside your project)"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"静态文件服务. ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"./static/")," 映射到 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"/static/")," (可以 ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"#static-file-serving-eg-images"}},"创建一个静态目录")," 在你的项目中)")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"这里有个简单的案例，可以下载看看 ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/nextgram"}},"sample app - nextgram")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"代码自动分割"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"每个页面只会导入",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"import"),"中绑定以及被用到的代码. 也就是说并不会加载不需要的代码!"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import cowsay from 'cowsay-browser'\n\nexport default () =>\n  <pre>\n    {cowsay.say({ text: 'hi there!' })}\n  </pre>\n")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"CSS"),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"支持嵌入样式"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"案例")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"https://github.com/zeit/next.js/tree/canary/examples/basic-css"},"Basic css")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"我们绑定 ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/styled-jsx"}},"styled-jsx"),' 来生成独立作用域的 CSS. 目标是支持 "shadow CSS",但是 ',o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/w3c/webcomponents/issues/71"}},"不支持独立模块作用域的 JS"),"."),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"export default () =>\n  <div>\n    Hello world\n    <p>scoped!</p>\n    <style jsx>{`\n      p {\n        color: blue;\n      }\n      div {\n        background: red;\n      }\n      @media (max-width: 600px) {\n        div {\n          background: blue;\n        }\n      }\n    `}</style>\n    <style global jsx>{`\n      body {\n        background: black;\n      }\n    `}</style>\n  </div>\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"想查看更多案例可以点击 ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://www.npmjs.com/package/styled-jsx"}},"styled-jsx documentation"),"查看."),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"内嵌样式"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-styled-components"},"Styled components")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-styletron"},"Styletron")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-glamor"},"Glamor")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-glamorous"},"Glamorous")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-cxs"},"Cxs")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-aphrodite"},"Aphrodite")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-fela"},"Fela")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"有些情况可以使用 CSS 内嵌 JS 写法。如下所示："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"export default () => <p style={{ color: 'red' }}>hi there</p>\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"更复杂的内嵌样式解决方案，特别是服务端渲染的时样式更改。我们可以通过包裹自定义 Document，来添加样式，案例如下：",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"#user-content-custom-document"}},"custom ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"a"},"<Document>"))),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"使用 CSS / Sass / Less / Stylus files"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"支持用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".css"),", ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".scss"),", ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".less")," or ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".styl"),"，需要配置默认文件 next.config.js，具体可查看下面链接"),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-css"}},"@zeit/next-css")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-sass"}},"@zeit/next-sass")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-less"}},"@zeit/next-less")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-stylus"}},"@zeit/next-stylus"))),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"静态文件服务（如图像）"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"在根目录下新建文件夹叫",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"static"),"。代码可以通过",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"/static/"),"来引入相关的静态资源。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'export default () => <img src="/static/my-image.png" alt="my image" />\n')),o.a.createElement(r["MDXTag"],{name:"p",components:n},"_注意：不要自定义静态文件夹的名字，只能叫",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"static")," ，因为只有这个名字 Next.js 才会把它当作静态资源。"),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"生成",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"h3"},"<head>")),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<head>")),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/head-elements"},"Head elements")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/layout-component"},"Layout component")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"我们设置一个内置组件来装载",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<head>"),"到页面中。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'import Head from \'next/head\'\n\nexport default () =>\n  <div>\n    <Head>\n      <title>My page title</title>\n      <meta name="viewport" content="initial-scale=1.0, width=device-width" />\n    </Head>\n    <p>Hello world!</p>\n  </div>\n')),o.a.createElement(r["MDXTag"],{name:"p",components:n},"我们定义",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"key"),"属性来避免重复的",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<head>"),"标签，保证",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<head>"),"只渲染一次，如下所示："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'import Head from \'next/head\'\nexport default () => (\n  <div>\n    <Head>\n      <title>My page title</title>\n      <meta name="viewport" content="initial-scale=1.0, width=device-width" key="viewport" />\n    </Head>\n    <Head>\n      <meta name="viewport" content="initial-scale=1.2, width=device-width" key="viewport" />\n    </Head>\n    <p>Hello world!</p>\n  </div>\n)\n')),o.a.createElement(r["MDXTag"],{name:"p",components:n},"只有第二个",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},'<meta name="viewport" />'),"才被渲染。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"注意：在卸载组件时，",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<head>"),"的内容将被清除。请确保每个页面都在其",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<head>"),"定义了所需要的内容，而不是假设其他页面已经加过了"),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"获取数据以及组件生命周期"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/data-fetch"},"Data fetch")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如果你需要一个有状态、生命周期或有初始数据的 React 组件（而不是上面的无状态函数），如下所示："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import React from 'react'\n\nexport default class extends React.Component {\n  static async getInitialProps({ req }) {\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\n    return { userAgent }\n  }\n\n  render() {\n    return (\n      <div>\n        Hello World {this.props.userAgent}\n      </div>\n    )\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"相信你注意到，当页面渲染时加载数据，我们使用了一个异步方法",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"。它能异步获取 JS 普通对象，并绑定在",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"props"),"上"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"当服务渲染时，",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"将会把数据序列化，就像",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"JSON.stringify"),"。所以确保",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"返回的是一个普通 JS 对象，而不是",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Date"),", ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Map")," 或 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Set"),"类型。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"当页面初次加载时，",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"只会在服务端执行一次。",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"只有在路由切换的时候（如",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Link"),"组件跳转或路由自定义跳转）时，客户端的才会被执行。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"当页面初始化加载时，",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"只会加载在服务端。只有当路由跳转（",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Link"),"组件跳转或 API 方法跳转）时，客户端才会执行",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"注意：",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"将不能使用在子组件中。只能使用在",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"pages"),"页面中。"),o.a.createElement("br",null),o.a.createElement(r["MDXTag"],{name:"blockquote",components:n},o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"blockquote"},"只有服务端用到的模块放在",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"里，请确保正确的导入了它们，可参考",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://arunoda.me/blog/ssr-and-server-only-modules"}},"import them properly"),"。 否则会拖慢你的应用速度。")),o.a.createElement("br",null),o.a.createElement(r["MDXTag"],{name:"p",components:n},"你也可以给无状态组件定义",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"const Page = ({ stars }) =>\n  <div>\n    Next stars: {stars}\n  </div>\n\nPage.getInitialProps = async ({ req }) => {\n  const res = await fetch('https://api.github.com/repos/zeit/next.js')\n  const json = await res.json()\n  return { stars: json.stargazers_count }\n}\n\nexport default Page\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"入参对象的属性如下："),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"pathname")," - URL 的 path 部分"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"query")," - URL 的 query 部分，并被解析成对象"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"asPath")," - 显示在浏览器中的实际路径（包含查询部分），为",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"String"),"类型"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"req")," - HTTP 请求对象 (只有服务器端有)"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"res")," - HTTP 返回对象 (只有服务器端有)"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"jsonPageRes")," - ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Response"}},"获取数据响应对象")," (只有客户端有)"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"err")," - 渲染过程中的任何错误")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"路由"),o.a.createElement(r["MDXTag"],{name:"h4",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"h4"},"<Link>"),"用法"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/hello-world"},"Hello World")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"可以用 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<Link>")," 组件实现客户端的路由切换。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"// pages/index.js\nimport Link from 'next/link'\n\nexport default () =>\n  <div>\n    Click{' '}\n    <Link href=\"/about\">\n      <a>here</a>\n    </Link>{' '}\n    to read more\n  </div>\n")),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"// pages/about.js\nexport default () => <p>Welcome to About!</p>\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"注意：可以使用",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"#prefetching-pages"}},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"a"},"<Link prefetch>")),"使链接和预加载在后台同时进行，来达到页面的最佳性能。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"客户端路由行为与浏览器很相似："),o.a.createElement(r["MDXTag"],{name:"ol",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ol"},"组件获取"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ol"},"如果组件定义了",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"getInitialProps"),"，数据获取了。如果有错误情况将会渲染 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"_error.js"),"。"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ol"},"1和2都完成了，",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"pushState"),"执行，新组件被渲染。")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如果需要注入",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"pathname"),", ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"query")," 或 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"asPath"),"到你组件中，你可以使用",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"#using-a-higher-order-component"}},"withRouter"),"。"),o.a.createElement(r["MDXTag"],{name:"h5",components:n},"URL 对象"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-url-object-routing"},"With URL Object Routing")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"组件",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"接收 URL 对象，而且它会自动格式化生成 URL 字符串"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"// pages/index.js\nimport Link from 'next/link'\n\nexport default () =>\n  <div>\n    Click{' '}\n    <Link href={{ pathname: '/about', query: { name: 'Zeit' }}}>\n      <a>here</a>\n    </Link>{' '}\n    to read more\n  </div>\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"将生成 URL 字符串",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"/about?name=Zeit"),"，你可以使用任何在",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://nodejs.org/api/url.html#url_url_strings_and_url_objects"}},"Node.js URL module documentation"),"定义过的属性。"),o.a.createElement(r["MDXTag"],{name:"h5",components:n},"替换路由"),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"组件默认将新 url 推入路由栈中。你可以使用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"replace"),"属性来防止添加新输入。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"// pages/index.js\nimport Link from 'next/link'\n\nexport default () =>\n  <div>\n    Click{' '}\n    <Link href=\"/about\" replace>\n      <a>here</a>\n    </Link>{' '}\n    to read more\n  </div>\n")),o.a.createElement(r["MDXTag"],{name:"h5",components:n},"组件支持点击事件 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"h5"},"onClick")),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"支持每个组件所支持的",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"onClick"),"事件。如果你不提供",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<a>"),"标签，只会处理",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"onClick"),"事件而",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"href"),"将不起作用。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'// pages/index.js\nimport Link from \'next/link\'\n\nexport default () =>\n  <div>\n    Click{\' \'}\n    <Link href="/about">\n      <img src="/static/image.png" alt="image" />\n    </Link>\n  </div>\n')),o.a.createElement(r["MDXTag"],{name:"h5",components:n},"暴露 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"h5"},"href")," 给子元素"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如子元素是一个没有 href 属性的",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<a>"),"标签，我们将会指定它以免用户重复操作。然而有些时候，我们需要里面有",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<a>"),"标签，但是",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Link"),"组件不会被识别成",o.a.createElement(r["MDXTag"],{name:"em",components:n,parentName:"p"},"超链接"),"，结果不能将",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"href"),"传递给子元素。在这种场景下，你可以定义一个",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Link"),"组件中的布尔属性",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"passHref"),"，强制将",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"href"),"传递给子元素。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"strong",components:n,parentName:"p"},"注意"),": 使用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"a"),"之外的标签而且没有通过",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"passHref"),"的链接可能会使导航看上去正确，但是当搜索引擎爬行检测时，将不会识别成链接（由于缺乏 href 属性），这会对你网站的 SEO 产生负面影响。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import Link from 'next/link'\nimport Unexpected_A from 'third-library'\n\nexport default ({ href, name }) =>\n  <Link href={href} passHref>\n    <Unexpected_A>\n      {name}\n    </Unexpected_A>\n  </Link>\n")),o.a.createElement(r["MDXTag"],{name:"h5",components:n},"禁止滚动到页面顶部"),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"的默认行为就是滚到页面顶部。当有 hash 定义时（＃），页面将会滚动到对应的 id 上，就像",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<a>"),"标签一样。为了预防滚动到顶部，可以给",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"加",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"scroll={false}"),"属性："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'<Link scroll={false} href="/?counter=10"><a>Disables scrolling</a></Link>\n<Link href="/?counter=10"><a>Changes with scrolling to top</a></Link>\n')),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"命令式"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/using-router"},"Basic routing")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-loading"},"With a page loading indicator")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"你也可以用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next/router"),"实现客户端路由切换"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import Router from 'next/router'\n\nexport default () =>\n  <div>\n    Click <span onClick={() => Router.push('/about')}>here</span> to read more\n  </div>\n")),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"拦截器 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"h4"},"popstate")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"有些情况（比如使用",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"#custom-server-and-routing"}},"custom router"),"），你可能想监听",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://developer.mozilla.org/en-US/docs/Web/Events/popstate"}},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"a"},"popstate")),"，在路由跳转前做一些动作。 比如，你可以操作 request 或强制 SSR 刷新"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'import Router from \'next/router\'\n\nRouter.beforePopState(({ url, as, options }) => {\n  // I only want to allow these two routes!\n  if (as !== "/" || as !== "/other") {\n    // Have SSR render bad routes as a 404.\n    window.location.href = as\n    return false\n  }\n\n  return true\n});\n')),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如果你在",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"beforePopState"),"中返回 false，",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Router"),"将不会执行",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"popstate"),"事件。 例如",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"#disabling-file-system-routing"}},"Disabling File-System Routing"),"。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"以上",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Router"),"对象的 API 如下："),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"route")," - 当前路由的",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"String"),"类型"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"pathname")," - 不包含查询内容的当前路径，为",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"String"),"类型"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"query")," - 查询内容，被解析成",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"Object"),"类型. 默认为",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"{}")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"asPath")," - 展现在浏览器上的实际路径，包含查询内容，为",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"String"),"类型"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"push(url, as=url)")," - 页面渲染第一个参数 url 的页面，浏览器栏显示的是第二个参数 url"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"replace(url, as=url)")," - performs a ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"replaceState")," call with the given url"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"beforePopState(cb=function)")," - 在路由器处理事件之前拦截.")),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"push")," 和 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"replace")," 函数的第二个参数",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"as"),"，是为了装饰 URL 作用。如果你在服务器端设置了自定义路由将会起作用。"),o.a.createElement(r["MDXTag"],{name:"h5",components:n},"URL 对象用法"),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"push")," 或 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"replace"),"可接收的 URL 对象（",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"组件的 URL 对象一样）来生成 URL。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import Router from 'next/router'\n\nconst handler = () =>\n  Router.push({\n    pathname: '/about',\n    query: { name: 'Zeit' }\n  })\n\nexport default () =>\n  <div>\n    Click <span onClick={handler}>here</span> to read more\n  </div>\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"也可以像",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"组件一样添加额外的参数。"),o.a.createElement(r["MDXTag"],{name:"h5",components:n},"路由事件"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"你可以监听路由相关事件。 下面是事件支持列表："),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"routeChangeStart(url)")," - 路由开始切换时触发"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"routeChangeComplete(url)")," - 完成路由切换时触发"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"routeChangeError(err, url)")," - 路由切换报错时触发"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"beforeHistoryChange(url)")," - 浏览器 history 模式开始切换时触发"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"hashChangeStart(url)")," - 开始切换 hash 值但是没有切换页面路由时触发"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"hashChangeComplete(url)")," - 完成切换 hash 值但是没有切换页面路由时触发")),o.a.createElement(r["MDXTag"],{name:"blockquote",components:n},o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"blockquote"},"这里的",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"url"),"是指显示在浏览器中的 url。如果你用了",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Router.push(url, as)"),"（或类似的方法），那浏览器中的 url 将会显示 as 的值。")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"下面是如何正确使用路由事件",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"routeChangeStart"),"的例子："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"const handleRouteChange = url => {\n  console.log('App is changing to: ', url)\n}\n\nRouter.events.on('routeChangeStart', handleRouteChange)\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如果你不想长期监听该事件，你可以用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"off"),"事件去取消监听："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"Router.events.off('routeChangeStart', handleRouteChange)\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如果路由加载被取消（比如快速连续双击链接）"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"Router.events.on('routeChangeError', (err, url) => {\n  if (err.cancelled) {\n    console.log(`Route to ${url} was cancelled!`)\n  }\n})\n")),o.a.createElement(r["MDXTag"],{name:"h5",components:n},"浅层路由"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-shallow-routing"},"Shallow Routing")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"浅层路由允许你改变 URL 但是不执行",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"生命周期。你可以加载相同页面的 URL，得到更新后的路由属性",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"pathname"),"和",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"query"),"，并不失去 state 状态。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"你可以给",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Router.push")," 或 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Router.replace"),"方法加",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"shallow: true"),"参数。如下面的例子所示："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// Current URL is \"/\"\nconst href = '/?counter=10'\nconst as = href\nRouter.push(href, as, { shallow: true })\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"现在 URL 更新为",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"/?counter=10"),"。在组件里查看",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"this.props.router.query"),"你将会看到更新的 URL。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"你可以在",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://facebook.github.io/react/docs/react-component.html#componentdidupdate"}},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"a"},"componentdidupdate")),"钩子函数中监听 URL 的变化。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"componentDidUpdate(prevProps) {\n  const { pathname, query } = this.props.router\n  // verify props have changed to avoid an infinite loop\n  if (query.id !== prevProps.router.query.id) {\n    // fetch data based on the new query\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"blockquote",components:n},o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"blockquote"},"注意:"),o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"blockquote"},"浅层路由只作用于相同 URL 的参数改变，比如我们假定有个其他路由",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"about"),"，而你向下面代码样运行:"),o.a.createElement(r["MDXTag"],{name:"pre",components:n,parentName:"blockquote"},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"Router.push('/?counter=10', '/about?counter=10', { shallow: true })\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"blockquote"},"那么这将会出现新页面，即使我们加了浅层路由，但是它还是会卸载当前页，会加载新的页面并触发新页面的",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"。")),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"高阶组件"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/using-with-router"},"Using the `withRouter` utility")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如果你想应用里每个组件都处理路由对象，你可以使用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"withRouter"),"高阶组件。下面是如何使用它："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import { withRouter } from 'next/router'\n\nconst ActiveLink = ({ children, router, href }) => {\n  const style = {\n    marginRight: 10,\n    color: router.pathname === href? 'red' : 'black'\n  }\n\n  const handleClick = (e) => {\n    e.preventDefault()\n    router.push(href)\n  }\n\n  return (\n    <a href={href} onClick={handleClick} style={style}>\n      {children}\n    </a>\n  )\n}\n\nexport default withRouter(ActiveLink)\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"上面路由对象的 API 可以参考",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"#imperatively"}},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"a"},"next/router")),"."),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"预加载页面"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"⚠️ 只有生产环境才有此功能 ⚠️"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-prefetching"},"Prefetching")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"Next.js 有允许你预加载页面的 API。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"用 Next.js 服务端渲染你的页面，可以达到所有你应用里所有未来会跳转的路径即时响应，有效的应用 Next.js，可以通过预加载应用程序的功能，最大程度的初始化网站性能。",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://zeit.co/blog/next#anticipation-is-the-key-to-performance"}},"查看更多"),"."),o.a.createElement(r["MDXTag"],{name:"blockquote",components:n},o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"blockquote"},"Next.js 的预加载功能只预加载 JS 代码。当页面渲染时，你可能需要等待数据请求。")),o.a.createElement(r["MDXTag"],{name:"h4",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"h4"},"<Link>"),"用法"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"你可以给",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"添加 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"prefetch")," 属性，Next.js 将会在后台预加载这些页面。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'import Link from \'next/link\'\n\n// example header component\nexport default () =>\n  <nav>\n    <ul>\n      <li>\n        <Link prefetch href="/">\n          <a>Home</a>\n        </Link>\n      </li>\n      <li>\n        <Link prefetch href="/about">\n          <a>About</a>\n        </Link>\n      </li>\n      <li>\n        <Link prefetch href="/contact">\n          <a>Contact</a>\n        </Link>\n      </li>\n    </ul>\n  </nav>\n')),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"命令式 prefetch 写法"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"大多数预加载是通过",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<Link />"),"处理的，但是我们还提供了命令式 API 用于更复杂的场景。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import { withRouter } from 'next/router'\n\nexport default withRouter(({ router }) =>\n  <div>\n    <a onClick={() => setTimeout(() => router.push('/dynamic'), 100)}>\n      A route transition will happen after 100ms\n    </a>\n    {// but we can prefetch it!\n    router.prefetch('/dynamic')}\n  </div>\n)\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"路由实例只允许在应用程序的客户端。以防服务端渲染发生错误，建议 prefetch 事件写在",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"componentDidMount()"),"生命周期里。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import React from 'react'\nimport { withRouter } from 'next/router'\n\nclass MyLink extends React.Component {\n  componentDidMount() {\n    const { router } = this.props\n    router.prefetch('/dynamic')\n  }\n\n  render() {\n    const { router } = this.props\n    return (\n       <div>\n        <a onClick={() => setTimeout(() => router.push('/dynamic'), 100)}>\n          A route transition will happen after 100ms\n        </a>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(MyLink)\n")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"自定义服务端路由"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/custom-server"},"Basic custom server")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/custom-server-express"},"Express integration")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/custom-server-hapi"},"Hapi integration")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/custom-server-koa"},"Koa integration")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/parameterized-routing"},"Parameterized routing")),o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/ssr-caching"},"SSR caching")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"一般你使用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next start"),"命令来启动 next 服务，你还可以编写代码来自定义路由，如使用路由正则等。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"当使用自定义服务文件，如下面例子所示叫 server.js 时，确保你更新了 package.json 中的脚本。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "scripts": {\n    "dev": "node server.js",\n    "build": "next build",\n    "start": "NODE_ENV=production node server.js"\n  }\n}\n')),o.a.createElement(r["MDXTag"],{name:"p",components:n},"下面这个例子使 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"/a")," 路由解析为",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"./pages/b"),"，以及",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"/b")," 路由解析为",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"./pages/a"),";"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// This file doesn't go through babel or webpack transformation.\n// Make sure the syntax and sources this file requires are compatible with the current node version you are running\n// See https://github.com/zeit/next.js/issues/1245 for discussions on Universal Webpack or universal Babel\nconst { createServer } = require('http')\nconst { parse } = require('url')\nconst next = require('next')\n\nconst dev = process.env.NODE_ENV !== 'production'\nconst app = next({ dev })\nconst handle = app.getRequestHandler()\n\napp.prepare().then(() => {\n  createServer((req, res) => {\n    // Be sure to pass `true` as the second argument to `url.parse`.\n    // This tells it to parse the query portion of the URL.\n    const parsedUrl = parse(req.url, true)\n    const { pathname, query } = parsedUrl\n\n    if (pathname === '/a') {\n      app.render(req, res, '/b', query)\n    } else if (pathname === '/b') {\n      app.render(req, res, '/a', query)\n    } else {\n      handle(req, res, parsedUrl)\n    }\n  }).listen(3000, err => {\n    if (err) throw err\n    console.log('> Ready on http://localhost:3000')\n  })\n})\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next"),"的 API 如下所示"),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"next(opts: object)"))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"opts 的属性如下:"),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"dev")," (",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"boolean"),") 判断 Next.js 应用是否在开发环境 - 默认",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"false")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"dir")," (",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"string"),") Next 项目路径 - 默认",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"'.'")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"quiet")," (",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"boolean"),") 是否隐藏包含服务端消息在内的错误信息 - 默认",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"false")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"conf")," (",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"object"),") 与",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"next.config.js"),"的对象相同 - 默认",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"{}"))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"生产环境的话，可以更改 package.json 里的",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"start"),"脚本为",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"NODE_ENV=production node server.js"),"。"),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"禁止文件路由"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"默认情况，",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Next"),"将会把",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"/pages"),"下的所有文件匹配路由（如",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"/pages/some-file.js")," 渲染为 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"site.com/some-file"),"）"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如果你的项目使用自定义路由，那么有可能不同的路由会得到相同的内容，可以优化 SEO 和用户体验。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"禁止路由链接到",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"/pages"),"下的文件，只需设置",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next.config.js"),"文件如下所示："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  useFileSystemPublicRoutes: false\n}\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"注意",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"useFileSystemPublicRoutes"),"只禁止服务端的文件路由；但是客户端的还是禁止不了。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"你如果想配置客户端路由不能跳转文件路由，可以参考",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"#intercepting-popstate"}},"Intercepting ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"a"},"popstate")),"。"),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"动态前缀"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"有时你需要设置动态前缀，可以在请求时设置",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"assetPrefix"),"改变前缀。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"使用方法如下："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"const next = require('next')\nconst micro = require('micro')\n\nconst dev = process.env.NODE_ENV !== 'production'\nconst app = next({ dev })\nconst handleNextRequests = app.getRequestHandler()\n\napp.prepare().then(() => {\n  const server = micro((req, res) => {\n    // Add assetPrefix support based on the hostname\n    if (req.headers.host === 'my-app.com') {\n      app.setAssetPrefix('http://cdn.com/myapp')\n    } else {\n      app.setAssetPrefix('')\n    }\n\n    handleNextRequests(req, res)\n  })\n\n  server.listen(port, (err) => {\n    if (err) {\n      throw err\n    }\n\n    console.log(`> Ready on http://localhost:${port}`)\n  })\n})\n")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"动态导入"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-dynamic-import"},"With Dynamic Import")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"ext.js 支持 JavaScript 的 TC39 提议",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/tc39/proposal-dynamic-import"}},"dynamic import proposal"),"。你可以动态导入 JavaScript 模块（如 React 组件）。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"动态导入相当于把代码分成各个块管理。Next.js 服务端动态导入功能，你可以做很多炫酷事情。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"下面介绍一些动态导入方式："),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"1. 基础支持 (同样支持 SSR)"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import dynamic from 'next/dynamic'\n\nconst DynamicComponent = dynamic(import('../components/hello'))\n\nexport default () =>\n  <div>\n    <Header />\n    <DynamicComponent />\n    <p>HOME PAGE is here!</p>\n  </div>\n")),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"2. 自定义加载组件"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import dynamic from 'next/dynamic'\n\nconst DynamicComponentWithCustomLoading = dynamic(\n  import('../components/hello2'),\n  {\n    loading: () => <p>...</p>\n  }\n)\n\nexport default () =>\n  <div>\n    <Header />\n    <DynamicComponentWithCustomLoading />\n    <p>HOME PAGE is here!</p>\n  </div>\n")),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"3. 禁止使用 SSR"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import dynamic from 'next/dynamic'\n\nconst DynamicComponentWithNoSSR = dynamic(import('../components/hello3'), {\n  ssr: false\n})\n\nexport default () =>\n  <div>\n    <Header />\n    <DynamicComponentWithNoSSR />\n    <p>HOME PAGE is here!</p>\n  </div>\n")),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"4. 同时加载多个模块"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import dynamic from 'next/dynamic'\n\nconst HelloBundle = dynamic({\n  modules: () => {\n    const components = {\n      Hello1: import('../components/hello1'),\n      Hello2: import('../components/hello2')\n    }\n\n    return components\n  },\n  render: (props, { Hello1, Hello2 }) =>\n    <div>\n      <h1>\n        {props.title}\n      </h1>\n      <Hello1 />\n      <Hello2 />\n    </div>\n})\n\nexport default () => <HelloBundle title=\"Dynamic Bundle\" />\n")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"自定义",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"h3"},"<App>")),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-app-layout"},"Using `_app.js` for layout"))),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-componentdidcatch"},"Using `_app.js` to override `componentDidCatch`")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"组件来初始化页面。你可以重写它来控制页面初始化，如下面的事："),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"当页面变化时保持页面布局"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"当路由变化时保持页面状态"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"使用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"componentDidCatch"),"自定义处理错误"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"注入额外数据到页面里 (如 GraphQL 查询)")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"重写的话，新建",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"./pages/_app.js"),"文件，重写 App 模块如下所示："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"import App, {Container} from 'next/app'\nimport React from 'react'\n\nexport default class MyApp extends App {\n  static async getInitialProps ({ Component, router, ctx }) {\n    let pageProps = {}\n\n    if (Component.getInitialProps) {\n      pageProps = await Component.getInitialProps(ctx)\n    }\n\n    return {pageProps}\n  }\n\n  render () {\n    const {Component, pageProps} = this.props\n    return <Container>\n      <Component {...pageProps} />\n    </Container>\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"自定义",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"h3"},"<Document>")),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-styled-components"},"Styled components custom document"))),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-amp"},"Google AMP")))),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"在服务端呈现"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"初始化服务端时添加文档标记元素"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"通常实现服务端渲染会使用一些 css-in-js 库，如",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"./examples/with-styled-components"}},"styled-components"),", ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"./examples/with-glamorous"}},"glamorous")," 或 ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"with-emotion"}},"emotion"),"。",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/styled-jsx"}},"styled-jsx"),"是 Next.js 自带默认使用的 css-in-js 库")),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Next.js"),"会自动定义文档标记，比如，你从来不需要添加",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<html>"),", ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<body>"),"等。如果想自定义文档标记，你可以新建",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"./pages/_document.js"),"，然后扩展",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Document"),"类："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"// _document is only rendered on the server side and not on the client side\n// Event handlers like onClick can't be added to this file\n\n// ./pages/_document.js\nimport Document, { Head, Main, NextScript } from 'next/document'\n\nexport default class MyDocument extends Document {\n  static async getInitialProps(ctx) {\n    const initialProps = await Document.getInitialProps(ctx)\n    return { ...initialProps }\n  }\n\n  render() {\n    return (\n      <html>\n        <Head>\n          <style>{`body { margin: 0 } /* custom! */`}</style>\n        </Head>\n        <body className=\"custom_class\">\n          <Main />\n          <NextScript />\n        </body>\n      </html>\n    )\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"钩子",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"#fetching-data-and-component-lifecycle"}},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"a"},"getInitialProps")),"接收到的参数",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"ctx"),"对象都是一样的"),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"回调函数",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"renderPage"),"是会执行 React 渲染逻辑的函数(同步)，这种做法有助于此函数支持一些类似于 Aphrodite 的 renderStatic 等一些服务器端渲染容器。")),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"strong",components:n,parentName:"p"},"注意：",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"strong"},"<Main />"),"外的 React 组件将不会渲染到浏览器中，所以那添加应用逻辑代码。如果你页面需要公共组件（菜单或工具栏），可以参照上面说的",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"strong"},"App"),"组件代替。")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"自定义错误处理"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"404和500错误客户端和服务端都会通过",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"error.js"),"组件处理。如果你想改写它，则新建",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"_error.js"),"在文件夹中："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import React from 'react'\n\nexport default class Error extends React.Component {\n  static getInitialProps({ res, err }) {\n    const statusCode = res ? res.statusCode : err ? err.statusCode : null;\n    return { statusCode }\n  }\n\n  render() {\n    return (\n      <p>\n        {this.props.statusCode\n          ? `An error ${this.props.statusCode} occurred on server`\n          : 'An error occurred on client'}\n      </p>\n    )\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"渲染内置错误页面"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如果你想渲染内置错误页面，你可以使用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next/error"),"："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import React from 'react'\nimport Error from 'next/error'\nimport fetch from 'isomorphic-unfetch'\n\nexport default class Page extends React.Component {\n  static async getInitialProps() {\n    const res = await fetch('https://api.github.com/repos/zeit/next.js')\n    const statusCode = res.statusCode > 200 ? res.statusCode : false\n    const json = await res.json()\n\n    return { statusCode, stars: json.stargazers_count }\n  }\n\n  render() {\n    if (this.props.statusCode) {\n      return <Error statusCode={this.props.statusCode} />\n    }\n\n    return (\n      <div>\n        Next stars: {this.props.stars}\n      </div>\n    )\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"blockquote",components:n},o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"blockquote"},"如果你自定义了个错误页面，你可以引入自己的错误页面来代替",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next/error"))),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"自定义配置"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如果你想自定义 Next.js 的高级配置，可以在根目录下新建",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next.config.js"),"文件（与",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"pages/")," 和 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"package.json"),"一起）"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"注意：",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next.config.js"),"是一个 Node.js 模块，不是一个 JSON 文件，可以用于 Next 启动服务已经构建阶段，但是不作用于浏览器端。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  /* config options here */\n}\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"或使用一个函数："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"module.exports = (phase, {defaultConfig}) => {\n  //\n  // https://github.com/zeit/\n  return {\n    /* config options here */\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"phase"),"是配置文件被加载时的当前内容。你可看到所有的 phases 常量：",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"./lib/constants.js"}},"constants"),"这些常量可以通过",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next/constants"),"引入："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"const {PHASE_DEVELOPMENT_SERVER} = require('next/constants')\nmodule.exports = (phase, {defaultConfig}) => {\n  if(phase === PHASE_DEVELOPMENT_SERVER) {\n    return {\n      /* development only config options here */\n    }\n  }\n\n  return {\n    /* config options for all phases except development here */\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"设置自定义构建目录"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"你可以自定义一个构建目录，如新建",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"build"),"文件夹来代替",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".next")," 文件夹成为构建目录。如果没有配置构建目录，构建时将会自动新建",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".next"),"文件夹"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  distDir: 'build'\n}\n")),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"禁止 etag 生成"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"你可以禁止 etag 生成根据你的缓存策略。如果没有配置，Next 将会生成 etags 到每个页面中。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  generateEtags: false\n}\n")),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"配置 onDemandEntries"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"Next 暴露一些选项来给你控制服务器部署以及缓存页面："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"module.exports = {\n  onDemandEntries: {\n    // period (in ms) where the server will keep pages in the buffer\n    maxInactiveAge: 25 * 1000,\n    // number of pages that should be kept simultaneously without being disposed\n    pagesBufferLength: 2,\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"这个只是在开发环境才有的功能。如果你在生成环境中想缓存 SSR 页面，请查看",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/tree/canary/examples/ssr-caching"}},"SSR-caching")),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"配置页面后缀名解析扩展"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如 typescript 模块",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-typescript"}},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"a"},"@zeit/next-typescript")),"，需要支持解析后缀名为",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".ts"),"的文件。",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"pageExtensions")," 允许你扩展后缀名来解析各种 pages 下的文件。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  pageExtensions: ['jsx', 'js']\n}\n")),o.a.createElement(r["MDXTag"],{name:"h4",components:n},"配置构建 ID"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"Next.js 使用构建时生成的常量来标识你的应用服务是哪个版本。在每台服务器上运行构建命令时，可能会导致多服务器部署出现问题。为了保持同一个构建 ID，可以配置",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"generateBuildId"),"函数："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-es6"]}},"// next.config.js\nmodule.exports = {\n  generateBuildId: async () => {\n    // For example get the latest git commit hash here\n    return 'my-build-id'\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"自定义 webpack 配置"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-webpack-bundle-analyzer"},"Custom webpack bundle analyzer")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"可以使用些一些常见的模块"),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-css"}},"@zeit/next-css")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-sass"}},"@zeit/next-sass")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-less"}},"@zeit/next-less")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-preact"}},"@zeit/next-preact")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-typescript"}},"@zeit/next-typescript"))),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"em",components:n,parentName:"p"},"注意： ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"em"},"webpack"),"方法将被执行两次，一次在服务端一次在客户端。你可以用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"em"},"isServer"),"属性区分客户端和服务端来配置")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"多配置可以组合在一起，如："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"const withTypescript = require('@zeit/next-typescript')\nconst withSass = require('@zeit/next-sass')\n\nmodule.exports = withTypescript(withSass({\n  webpack(config, options) {\n    // Further custom configuration here\n    return config\n  }\n}))\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"为了扩展",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"webpack"),"使用，可以在",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next.config.js"),"定义函数。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js is not transformed by Babel. So you can only use javascript features supported by your version of Node.js.\n\nmodule.exports = {\n  webpack: (config, { buildId, dev, isServer, defaultLoaders }) => {\n    // Perform customizations to webpack config\n    // Important: return the modified config\n    return config\n  },\n  webpackDevMiddleware: config => {\n    // Perform customizations to webpack dev middleware config\n    // Important: return the modified config\n    return config\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"webpack"),"的第二个参数是个对象，你可以自定义配置它，对象属性如下所示："),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"buildId")," - 字符串类型，构建的唯一标示"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"dev")," - ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"Boolean"),"型，判断你是否在开发环境下"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"isServer")," - ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"Boolean")," 型，为",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"true"),"使用在服务端, 为",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"false"),"使用在客户端."),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"li"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"defaultLoaders")," - 对象型 ，内部加载器, 你可以如下配置"),o.a.createElement(r["MDXTag"],{name:"ul",components:n,parentName:"li"},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"babel")," - 对象型，配置",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"babel-loader"),"."),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"hotSelfAccept")," - 对象型， ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"hot-self-accept-loader"),"配置选项.这个加载器只能用于高阶案例。如 ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-typescript"}},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"a"},"@zeit/next-typescript")),"添加顶层 typescript 页面。")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"defaultLoaders.babel"),"使用案例如下："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// Example next.config.js for adding a loader that depends on babel-loader\n// This source was taken from the @zeit/next-mdx plugin source:\n// https://github.com/zeit/next-plugins/blob/master/packages/next-mdx\nmodule.exports = {\n  webpack: (config, {}) => {\n    config.module.rules.push({\n      test: /.mdx/,\n      use: [\n        options.defaultLoaders.babel,\n        {\n          loader: '@mdx-js/loader',\n          options: pluginOptions.options\n        }\n      ]\n    })\n\n    return config\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"自定义 babel 配置"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-custom-babel-config"},"Custom babel configuration")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"为了扩展方便我们使用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"babel"),"，可以在应用根目录新建",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".babelrc"),"文件，该文件可配置。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如果有该文件，我们将会考虑数据源，因此也需要定义 next 项目需要的东西，也就是 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next/babel"),"预设。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"这种设计方案将会使你不诧异于我们可以定制 babel 配置。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"下面是",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".babelrc"),"文件案例："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "presets": ["next/babel"],\n  "plugins": []\n}\n')),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next/babel"),"预设可处理各种 React 应用所需要的情况。包括："),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"preset-env"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"preset-react"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"plugin-proposal-class-properties"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"plugin-proposal-object-rest-spread"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"plugin-transform-runtime"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"styled-jsx")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"presets / plugins 不允许添加到",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".babelrc"),"中，然而你可以配置",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next/babel"),"预设："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "presets": [\n    ["next/babel", {\n      "preset-env": {},\n      "transform-runtime": {},\n      "styled-jsx": {},\n      "class-properties": {}\n    }]\n  ],\n  "plugins": []\n}\n')),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},'"preset-env"'),"模块选项应该保持为 false，否则 webpack 代码分割将被禁用。"),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"暴露配置到服务端和客户端"),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next/config"),"模块使你应用运行时可以读取些存储在",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next.config.js"),"的配置项。",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"serverRuntimeConfig"),"属性只在服务器端可用，",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"publicRuntimeConfig"),"属性在服务端和客户端可用。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  serverRuntimeConfig: { // Will only be available on the server side\n    mySecret: 'secret'\n  },\n  publicRuntimeConfig: { // Will be available on both server and client\n    staticFolder: '/static',\n    mySecret: process.env.MY_SECRET // Pass through env variables\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// pages/index.js\nimport getConfig from 'next/config'\n// Only holds serverRuntimeConfig and publicRuntimeConfig from next.config.js nothing else.\nconst {serverRuntimeConfig, publicRuntimeConfig} = getConfig()\n\nconsole.log(serverRuntimeConfig.mySecret) // Will only be available on the server side\nconsole.log(publicRuntimeConfig.staticFolder) // Will be available on both server and client\n\nexport default () => <div>\n  <img src={`${publicRuntimeConfig.staticFolder}/logo.png`} alt=\"logo\" />\n</div>\n")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"启动服务选择 hostname"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"启动开发环境服务可以设置不同的 hostname，你可以在启动命令后面加上",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"--hostname 主机名")," 或 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"-H 主机名"),"。它将会启动一个 TCP 服务器来监听连接所提供的主机。"),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"CDN 支持前缀"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"建立一个 CDN，你能配置",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"assetPrefix"),"选项，去配置你的 CDN 源。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"const isProd = process.env.NODE_ENV === 'production'\nmodule.exports = {\n  // You may only need to add assetPrefix in the production.\n  assetPrefix: isProd ? 'https://cdn.mydomain.com' : ''\n}\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"注意：Next.js 运行时将会自动添加前缀，但是对于",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"/static"),"是没有效果的，如果你想这些静态资源也能使用 CDN，你需要自己添加前缀。有一个方法可以判断你的环境来加前缀，如 ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/tree/master/examples/with-universal-configuration"}},"in this example"),"。"),o.a.createElement(r["MDXTag"],{name:"h2",components:n},"项目部署"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"部署中，你可以先构建打包生成环境代码，再启动服务。因此，构建和启动分为下面两条命令："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-bash"]}},"next build\nnext start\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"例如，使用",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://zeit.co/now"}},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"a"},"now")),"去部署",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"package.json"),"配置文件如下："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "name": "my-app",\n  "dependencies": {\n    "next": "latest"\n  },\n  "scripts": {\n    "dev": "next",\n    "build": "next build",\n    "start": "next start"\n  }\n}\n')),o.a.createElement(r["MDXTag"],{name:"p",components:n},"然后就可以直接运行",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"now"),"了。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"Next.js 也有其他托管解决方案。请查考 wiki 章节",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/wiki/Deployment"}},"'Deployment'")," 。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"注意：",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"NODE_ENV"),"可以通过",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next"),"命令配置，如果没有配置，会最大渲染，如果你使用编程式写法的话",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"#custom-server-and-routing"}},"programmatically"),"，你需要手动设置",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"NODE_ENV=production"),"。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"注意：推荐将",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".next"),"或自定义打包文件夹",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js#custom-configuration"}},"custom dist folder"),"放入",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".gitignore")," 或 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".npmignore"),"中。否则，使用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"files")," 或 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"now.files"),"添加部署白名单，并排除",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".next"),"或自定义打包文件夹。"),o.a.createElement(r["MDXTag"],{name:"h2",components:n},"浏览器支持"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"Next.js 支持 IE11 和所有的现代浏览器使用了",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://new.babeljs.io/docs/en/next/babel-preset-env.html"}},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"a"},"@babel/preset-env")),"。为了支持 IE11，Next.js 需要全局添加",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Promise"),"的 polyfill。有时你的代码或引入的其他 NPM 包的部分功能现代浏览器不支持，则需要用 polyfills 去实现。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"ployflls 实现案例为",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/tree/canary/examples/with-polyfills"}},"polyfills"),"。"),o.a.createElement(r["MDXTag"],{name:"h2",components:n},"导出静态页面"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-static-export"},"Static export")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next export"),"可以输出一个 Next.js 应用作为静态资源应用而不依靠 Node.js 服务。 这个输出的应用几乎支持 Next.js 的所有功能，包括动态路由，预获取，预加载以及动态导入。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next export"),"将把所有有可能渲染出的 HTML 都生成。这是基于映射对象的",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"pathname"),"关键字关联到页面对象。这个映射叫做",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"exportPathMap"),"。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"页面对象有2个属性:"),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"page")," - 字符串类型，页面生成目录"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"query")," - 对象类型，当预渲染时，",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"query"),"对象将会传入页面的生命周期",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"getInitialProps"),"中。默认为",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"{}"),"。")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"使用"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"通常开发 Next.js 应用你将会运行："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre"},"next build\nnext export\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next export"),"命令默认不需要任何配置，将会自动生成默认",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"exportPathMap"),"生成",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"pages"),"目录下的路由你页面。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如果你想动态配置路由，可以在",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next.config.js"),"中添加异步函数",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"exportPathMap"),"。"),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  exportPathMap: async function (defaultPathMap) {\n    return {\n      '/': { page: '/' },\n      '/about': { page: '/about' },\n      '/readme.md': { page: '/readme' },\n      '/p/hello-nextjs': { page: '/post', query: { title: 'hello-nextjs' } },\n      '/p/learn-nextjs': { page: '/post', query: { title: 'learn-nextjs' } },\n      '/p/deploy-nextjs': { page: '/post', query: { title: 'deploy-nextjs' } }\n    }\n  }\n}\n")),o.a.createElement(r["MDXTag"],{name:"blockquote",components:n},o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"blockquote"},"注意：如果 path 的结尾是目录名，则将导出",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"/dir-name/index.html"),"，但是如果结尾有扩展名，将会导出对应的文件，如上",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"/readme.md"),"。如果你使用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},".html"),"以外的扩展名解析文件时，你需要设置 header 的",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Content-Type"),'头为"text/html".')),o.a.createElement(r["MDXTag"],{name:"p",components:n},"输入下面命令："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-sh"]}},"next build\nnext export\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"你可以在",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"package.json"),"添加一个 NPM 脚本，如下所示："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "scripts": {\n    "build": "next build",\n    "export": "npm run build && next export"\n  }\n}\n')),o.a.createElement(r["MDXTag"],{name:"p",components:n},"接着只用执行一次下面命令："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-sh"]}},"npm run export\n")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"然后你将会有一个静态页面应用在",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"out")," 目录下。"),o.a.createElement(r["MDXTag"],{name:"blockquote",components:n},o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"blockquote"},"你也可以自定义输出目录。可以运行",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next export -h"),"命令查看帮助。")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"现在你可以部署",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"out"),"目录到任意静态资源服务器上。注意如果部署 GitHub Pages 需要加个额外的步骤，",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/wiki/Deploying-a-Next.js-app-into-GitHub-Pages"}},"文档如下")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"例如，访问",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"out"),"目录并用下面命令部署应用",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://zeit.co/now"}},"ZEIT Now"),"."),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-sh"]}},"now\n")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"限制"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"使用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next export"),"，我们创建了个静态 HTML 应用。构建时将会运行页面里生命周期",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps")," 函数。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"req"),"和",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"res"),"只在服务端可用，不能通过",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"。"),o.a.createElement(r["MDXTag"],{name:"blockquote",components:n},o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"blockquote"},"所以你不能预构建 HTML 文件时动态渲染 HTML 页面。如果你想动态渲染可以运行",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"next start"),"或其他自定义服务端 API。")),o.a.createElement(r["MDXTag"],{name:"h2",components:n},"多 zone"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"./examples/with-zones"},"With Zones")))),o.a.createElement(r["MDXTag"],{name:"p",components:n},"一个 zone 时一个单独的 Next.js 应用。如果你有很多 zone，你可以合并成一个应用。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"例如，你如下有两个 zone："),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://docs.my-app.com"}},"https://docs.my-app.com")," 服务于路由 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"/docs/**")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://ui.my-app.com"}},"https://ui.my-app.com")," 服务于所有页面")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"有多 zone 应用技术支持，你可以将几个应用合并到一个，而且可以自定义 URL 路径，使你能同时单独开发各个应用。"),o.a.createElement(r["MDXTag"],{name:"blockquote",components:n},o.a.createElement(r["MDXTag"],{name:"p",components:n,parentName:"blockquote"},"与 microservices 观念类似, 只是应用于前端应用.")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"怎么定义一个 zone"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"zone 没有单独的 API 文档。你需要做下面事即可："),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"确保你的应用里只有需要的页面 (例如, ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://ui.my-app.com"}},"https://ui.my-app.com")," 不包含 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"/docs/**"),")"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"确保你的应用有个前缀",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next.js#cdn-support-with-asset-prefix"}},"assetPrefix"),"。（你也可以定义动态前缀",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next.js#dynamic-assetprefix"}},"dynamically"),"）")),o.a.createElement(r["MDXTag"],{name:"h3",components:n},"怎么合并他们"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"你能使用 HTTP 代理合并 zone"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"你能使用代理",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/micro-proxy"}},"micro proxy"),"来作为你的本地代理服务。它允许你定义路由规则如下："),o.a.createElement(r["MDXTag"],{name:"pre",components:n},o.a.createElement(r["MDXTag"],{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "rules": [\n    {"pathname": "/docs**", "method":["GET", "POST", "OPTIONS"], "dest": "https://docs.my-app.com"},\n    {"pathname": "/**", "dest": "https://ui.my-app.com"}\n  ]\n}\n')),o.a.createElement(r["MDXTag"],{name:"p",components:n},"生产环境部署，如果你使用了",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://zeit.co/now"}},"ZEIT now"),"，可以它的使用",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://zeit.co/docs/features/path-aliases"}},"path alias")," 功能。否则，你可以设置你已使用的代理服务编写上面规则来路由 HTML 页面"),o.a.createElement(r["MDXTag"],{name:"h2",components:n},"技巧"),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://www.raygesualdo.com/posts/301-redirects-with-nextjs/"}},"设置301重定向")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://arunoda.me/blog/ssr-and-server-only-modules"}},"只处理服务器端模块")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/builderbook/builderbook"}},"构建项目 React-Material-UI-Next-Express-Mongoose-Mongodb")),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/async-labs/saas"}},"构建一个 SaaS 产品 React-Material-UI-Next-MobX-Express-Mongoose-MongoDB-TypeScript"))),o.a.createElement(r["MDXTag"],{name:"h2",components:n},"问答"),o.a.createElement("summary",null,"这个产品可以用于生产环境吗？"),"https://zeit.co 都是一直用 Next.js 写的。",o.a.createElement(r["MDXTag"],{name:"p",components:n},"  它的开发体验和终端用户体验都很好，所以我们决定开源出来给大家共享。"),o.a.createElement("summary",null,"体积多大？"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"客户端大小根据应用需求不一样大小也不一样。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"一个最简单 Next 应该用 gzip 压缩后大约65kb"),o.a.createElement("summary",null,"这个像 `create-react-app`?"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"是或不是."),o.a.createElement(r["MDXTag"],{name:"p",components:n},"是，因为它让你的 SSR 开发更简单。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"不是，因为它规定了一定的目录结构，使我们能做以下更高级的事："),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"服务端渲染"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"自动代码分割")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"此外，Next.js 还提供两个内置特性："),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"路由与懒加载组件: ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"<Link>")," (通过引入 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"next/link"),")"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"修改",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"<head>"),"的组件: ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"<Head>")," (通过引入 ",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"next/head"),")")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"如果你想写共用组件，可以嵌入 Next.js 应用和 React 应用中，推荐使用",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"create-react-app"),"。你可以更改",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"import"),"保持代码清晰。"),o.a.createElement("summary",null,"怎么解决 CSS 嵌入 JS 问题?"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"Next.js 自带",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/styled-jsx"}},"styled-jsx"),"库支持 CSS 嵌入 JS。而且你可以选择其他嵌入方法到你的项目中，可参考文档",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"#css-in-js"}},"as mentioned before"),"。"),o.a.createElement("summary",null,"哪些语法会被转换？怎么转换它们？"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"我们遵循 V8 引擎的，如今 V8 引擎广泛支持 ES6 语法以及",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"async"),"和",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"await"),"语法，所以我们支持转换它们。但是 V8 引擎不支持修饰器语法，所以我们也不支持转换这语法。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"可以参照",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/blob/master/server/build/webpack.js#L79"}},"这些")," 以及 ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/issues/26"}},"这些")),o.a.createElement("summary",null,"为什么使用新路由?"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"Next.js 的特别之处如下所示:"),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"路由不需要被提前知道"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"路由总是被懒加载"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"顶层组件可以定义生命周期",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"getInitialProps"),"来阻止路由加载（当服务端渲染或路由懒加载时）")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"因此,我们可以介绍一个非常简单的路由方法,它由下面两部分组成:"),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"每个顶层组件都将会收到一个",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"url"),"对象，来检查 url 或修改历史记录"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"<Link />"),"组件用于包装如(",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"li"},"<a/>"),")标签的元素容器，来执行客户端转换。")),o.a.createElement(r["MDXTag"],{name:"p",components:n},"我们使用了些有趣的场景来测试路由的灵活性，例如，可查看",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/nextgram"}},"nextgram"),"。"),o.a.createElement("summary",null,"我怎么定义自定义路由?"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"我们通过请求处理来",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"#custom-server-and-routing"}},"添加"),"任意 URL 与任意组件之前的映射关系。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"在客户端，我们",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"组件有个属性",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"as"),"，可以装饰改变获取到的 URL。"),o.a.createElement("summary",null,"怎么获取数据?"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"这由你决定。",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"是一个异步函数",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"async"),"（也就是函数将会返回个",o.a.createElement(r["MDXTag"],{name:"inlineCode",components:n,parentName:"p"},"Promise"),"）。你可以在任意位置获取数据。"),o.a.createElement("summary",null,"我可以使用 GraphQL 吗?"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"是的! 这里有个例子",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"./examples/with-apollo"}},"Apollo"),"."),o.a.createElement("summary",null,"我可以使用 Redux 吗?"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"是的! 这里有个",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"./examples/with-redux"}},"例子")),o.a.createElement("summary",null,"我可以在 Next 应用中使用我喜欢的 Javascript 库或工具包吗?"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"从我们第一次发版就已经提供",o.a.createElement(r["MDXTag"],{name:"strong",components:n,parentName:"p"},"很多"),"例子，你可以查看这些",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"./examples"}},"例子"),"。"),o.a.createElement("summary",null,"什么启发我们做这个?"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"我们实现的大部分目标都是通过 Guillermo Rauch 的",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"http://rauchg.com/2014/7-principles-of-rich-web-applications/"}},"Web 应用的7原则"),"来启发出的。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"PHP 的易用性也是个很好的灵感来源，我们觉得 Next.js 可以替代很多需要用 PHP 输出 HTML 的场景。"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"与 PHP 不同的是，我们得利于 ES6 模块系统，每个文件会输出一个",o.a.createElement(r["MDXTag"],{name:"strong",components:n,parentName:"p"},"组件或方法"),"，以便可以轻松的导入用于懒加载和测试"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"我们研究 React 的服务器渲染时并没有花费很大的步骤，因为我们发现一个类似于 Next.js 的产品，React 作者 Jordan Walke 写的",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"https://github.com/facebookarchive/react-page"}},"react-page")," (现在已经废弃)"),o.a.createElement(r["MDXTag"],{name:"h2",components:n},"贡献"),o.a.createElement(r["MDXTag"],{name:"p",components:n},"可查看 ",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"p",props:{href:"./contributing.md"}},"contributing.md")),o.a.createElement(r["MDXTag"],{name:"h2",components:n},"讨论"),o.a.createElement(r["MDXTag"],{name:"ul",components:n},o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"(",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://raoenhui.github.io/nextjs/2018/08/31/Nextjs%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3"}},"@前端妹子blog"),")"),o.a.createElement(r["MDXTag"],{name:"li",components:n,parentName:"ul"},"(",o.a.createElement(r["MDXTag"],{name:"a",components:n,parentName:"li",props:{href:"https://github.com/raoenhui/raoenhui.github.io/issues/18"}},"@github issue"),")")))};var p=a(1);var s=a.n(p);var i=a(82);var g=a.n(i);var u=a(16);var d=a.n(u);var E=a(76);var h=a.n(E);var f=a(83);var T=a.n(f);function M(e,n){if(null==e)return{};var a={};var t=Object.keys(e);var o,r;for(r=0;r<t.length;r++){o=t[r];if(n.indexOf(o)>=0)continue;a[o]=e[o]}if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(r=0;r<m.length;r++){o=m[r];if(n.indexOf(o)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,o))continue;a[o]=e[o]}}return a}var D=function(e){var n=e.children,a=M(e,["children"]);return o.a.createElement(T.a,null,o.a.createElement("title",null,"".concat(a.title," - Next.js Documentation")),o.a.createElement("meta",{name:"twitter:card",content:a.image?"summary_large_image":"summary"}),o.a.createElement("meta",{name:"twitter:site",content:"@zeithq"}),o.a.createElement("meta",{name:"og:title",content:a.ogTitle||a.title}),a.description?o.a.createElement("meta",{name:"description",content:a.description}):null,a.ogDescription?o.a.createElement("meta",{name:"og:description",content:a.ogDescription}):o.a.createElement("meta",{name:"og:description",content:a.description}),a.video?[o.a.createElement("meta",{name:"og:type",content:"video",key:"0"}),o.a.createElement("meta",{name:"og:video",content:a.video,key:"1"}),o.a.createElement("meta",{name:"og:video:type",content:"video/mp4",key:"2"})]:null,n)};var X=function e(n){if(n.href.startsWith("/")&&!n.href.startsWith("/docs"))return o.a.createElement(N,n);if(n.href.includes("@")||n.href.startsWith("#"))return o.a.createElement(x,n);return o.a.createElement(b,n)};var N=function e(n){var a=n.href,t=n.as,r=n.children,m=n.error,l=void 0!==m&&m;return o.a.createElement(d.a,{prefetch:true,href:a,as:t},o.a.createElement("a",{className:s.a.dynamic([["3905228585",[l?"underline":"none",l?"red":"#3333FF"]]])},r,o.a.createElement(s.a,{styleId:"3905228585",css:["a.__jsx-style-dynamic-selector{-webkit-text-decoration:".concat(l?"underline":"none",";text-decoration:").concat(l?"underline":"none",";color:").concat(l?"red":"#3333FF",";font-size:inherit;}"),"a.__jsx-style-dynamic-selector:hover{-webkit-text-decoration:underline;text-decoration:underline;}"],dynamic:[l?"underline":"none",l?"red":"#3333FF"]})))};var x=function e(n){var a=n.href,t=n.onClick,r=n.children;return o.a.createElement("a",{href:a,onClick:t,className:"jsx-3433991402"},r,o.a.createElement(s.a,{styleId:"3433991402",css:["a.jsx-3433991402{-webkit-text-decoration:none;text-decoration:none;color:#3333FF;font-size:inherit;}","a.jsx-3433991402:hover{-webkit-text-decoration:underline;text-decoration:underline;}"]}))};var b=function e(n){var a=n.href,t=n.children;return o.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"jsx-3433991402"},t,o.a.createElement(s.a,{styleId:"3433991402",css:["a.jsx-3433991402{-webkit-text-decoration:none;text-decoration:none;color:#3333FF;font-size:inherit;}","a.jsx-3433991402:hover{-webkit-text-decoration:underline;text-decoration:underline;}"]}))};var v=a(84);function y(){return o.a.createElement("header",{className:"jsx-3417251989"},o.a.createElement(X,{href:"/"},o.a.createElement("a",{className:"jsx-3417251989 logo"},o.a.createElement(v["a"],null))),o.a.createElement(s.a,{styleId:"3417251989",css:["header.jsx-3417251989{position:fixed;z-index:1000;top:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:144px;padding:0 56px;}",".logo.jsx-3417251989 svg{height:50px;}","@media only screen and (max-width:912px){header.jsx-3417251989{position:relative;}}"]}))}var C=function e(n){var a=n.children,t=n.syntax;return o.a.createElement("pre",{className:"jsx-2288494592 "+((t?" ".concat(t):"")||"")},o.a.createElement("code",{className:"jsx-2288494592"},a),o.a.createElement(s.a,{styleId:"2288494592",css:["pre.jsx-2288494592{border:1px solid #eaeaea;padding:20px;margin:40px 0;white-space:pre;overflow:auto;-webkit-overflow-scrolling:touch;}","code.jsx-2288494592{color:#000000;font-family:Menlo,Monaco,Lucida Console,Liberation Mono, DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace, serif;font-size:13px;line-height:20px;}"]}))};var j=function e(n){var a=n.children,t=n.noWrap;return o.a.createElement("code",{className:"jsx-1052285736 "+(t?"no-wrap":"")},a,o.a.createElement(s.a,{styleId:"1052285736",css:["code.jsx-1052285736{color:#000000;font-family:Menlo,Monaco,Lucida Console,Liberation Mono, DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace, serif;font-size:0.9em;white-space:pre-wrap;padding:0.2em 0.4em;margin:0;background-color:rgba(27,31,35,0.05);border-radius:0.3em;}","code.no-wrap.jsx-1052285736{white-space:nowrap;}"]}))};var w=a(268);var k=a.n(w);var _=this&&this.__assign||Object.assign||function(e){for(var n,a=1,t=arguments.length;a<t;a++){n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var S=function(e,n){var a=n.scrollLeft,t=n.scrollTop;e.scrollLeft=a;e.scrollTop=t};function I(e,n){if(!e||!(e instanceof HTMLElement))throw new Error("Element is required in scrollIntoViewIfNeeded");var a=_({handleScroll:S},n);var t={top:0,right:0,bottom:0,left:0};a.offset=a.offset?_({},t,a.offset):t;function o(e,n,t,o){return false===a.centerIfNeeded||t<=e+o&&e<=n+o?Math.min(t,Math.max(n,e)):(n+t)/2}var r=a.offset;var m=r.top;var l=r.left;var c=r.bottom;var p=r.right;function s(e,n,a,t){return{left:e+l,top:n+m,width:a,height:t,right:e+l+a+p,bottom:n+m+t+c,translate:function(o,r){return s(o+e+l,r+n+m,a,t)},relativeFromTo:function(o,r){var c=e+l,p=n+m;o=o.offsetParent;r=r.offsetParent;if(o===r)return g;for(;o;o=o.offsetParent){c+=o.offsetLeft+o.clientLeft;p+=o.offsetTop+o.clientTop}for(;r;r=r.offsetParent){c-=r.offsetLeft+r.clientLeft;p-=r.offsetTop+r.clientTop}return s(c,p,a,t)}}}var i,g=s(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight);while((i=e.parentNode)instanceof HTMLElement&&e!==a.boundary){var u=i.offsetLeft+i.clientLeft;var d=i.offsetTop+i.clientTop;g=g.relativeFromTo(e,i).translate(-u,-d);var E=o(i.scrollLeft,g.right-i.clientWidth,g.left,i.clientWidth);var h=o(i.scrollTop,g.bottom-i.clientHeight,g.top,i.clientHeight);a.handleScroll(i,{scrollLeft:E,scrollTop:h},a);g=g.translate(u-i.scrollLeft,d-i.scrollTop);e=i}}var R=this&&this.__assign||Object.assign||function(e){for(var n,a=1,t=arguments.length;a<t;a++){n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var P=function(e,n,a){var t=n.scrollLeft,o=n.scrollTop;if(a.duration)k()(e,{scrollLeft:t,scrollTop:o},{duration:a.duration,easing:a.easing});else{e.scrollLeft=t;e.scrollTop=o}};function O(e){return"boolean"===typeof e}function L(e,n,a,t,o){void 0===o&&(o={});if(!e||!(e instanceof HTMLElement))throw new Error("Element is required in scrollIntoViewIfNeeded");var r={centerIfNeeded:false,handleScroll:P};O(n)?r.centerIfNeeded=n:r=R({},r,n);var m={top:0,right:0,bottom:0,left:0};r.offset=r.offset?R({},m,r.offset):m;if(a){r.duration=a.duration;r.easing=a.easing}t&&(r.boundary=t);o.offsetTop&&(r.offset.top=o.offsetTop);o.offsetRight&&(r.offset.right=o.offsetRight);o.offsetBottom&&(r.offset.bottom=o.offsetBottom);o.offsetLeft&&(r.offset.left=o.offsetLeft);return I(e,r)}function z(e){z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(n){return typeof n}:function e(n){return n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};return z(e)}function q(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function A(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||false;t.configurable=true;"value"in t&&(t.writable=true);Object.defineProperty(e,t.key,t)}}function H(e,n,a){n&&A(e.prototype,n);a&&A(e,a);return e}function U(e,n){if(n&&("object"===z(n)||"function"===typeof n))return n;return F(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var B=["安装","代码自动分割","CSS","静态文件服务（如图像）","生成<Head>","获取数据以及组件生命周期","路由","预加载页面","自定义服务端路由","动态导入","自定义<App>","自定义<Document>","自定义错误处理","渲染内置错误页面","自定义配置","自定义-webpack-配置","自定义-babel-配置","项目部署","浏览器支持","导出静态页面","使用","多-zone","技巧","问答","贡献"];var V=function e(n){return n.toLowerCase().replace(/\s+/g,"-").replace(/[?!]/g,"")};function G(e,n,a,t){var o=J(e);return L(e,n,a,o,t)}function J(e){var n=e.parentNode;if(!n)return null;return n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth?n:J(n)}var Z=function(e){W(n,e);function n(){var e;q(this,n);e=U(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));e.activeNavItem=null;return e}H(n,[{key:"componentDidMount",value:function e(){this.scrollIntoViewIfNeeded()}},{key:"shouldComponentUpdate",value:function e(n,a){return this.props.isActive!==n.isActive}},{key:"componentDidUpdate",value:function e(){this.scrollIntoViewIfNeeded()}},{key:"scrollIntoViewIfNeeded",value:function e(){this.props.isActive&&(this.activeNavItem.scrollIntoViewIfNeeded?this.activeNavItem.scrollIntoViewIfNeeded():G(this.activeNavItem))}},{key:"render",value:function e(){var n=this;var a=this.props,t=a.item,r=a.updateSelected,m=a.isActive;return o.a.createElement("a",{href:"#".concat(V(t)),onClick:r,ref:function e(a){return n.activeNavItem=a},className:"jsx-372674438 "+((m?"active":"")||"")},t,o.a.createElement(s.a,{styleId:"372674438",css:["a.jsx-372674438{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1.4rem;color:#000000;-webkit-text-decoration:none;text-decoration:none;margin-left:-56px;padding:6px 0;padding-left:56px;position:relative;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}","a.active.jsx-372674438{font-weight:500;}","a.jsx-372674438:after{content:'';position:absolute;left:0;top:0;width:4px;height:100%;-webkit-transition:border-width 0.2s ease;transition:border-width 0.2s ease;}","a.active.jsx-372674438:after{border-left:4px solid #000;padding-left:52px;}","a.jsx-372674438:not(.active):hover:after{border-left:4px solid #DDDDDD;padding-left:52px;}"]}))}}]);return n}(t["Component"]);var $=function(e){W(n,e);function n(){q(this,n);return U(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}H(n,[{key:"render",value:function e(){var n=this;return o.a.createElement("div",{className:"jsx-141781163 documentation__sidebar"},o.a.createElement("nav",{className:"jsx-141781163"},o.a.createElement("span",{className:"jsx-141781163 documentation__sidebar-heading"},"Getting Started"),B.map(function(e,a){return o.a.createElement(Z,{key:a,item:e,updateSelected:function a(){return n.props.updateSelected("#".concat(V(e)))},isActive:n.props.currentSelection==="#".concat(V(e))})})),o.a.createElement(s.a,{styleId:"141781163",css:[".documentation__sidebar.jsx-141781163{width:312px;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;position:relative;padding-right:56px;}",".documentation__sidebar.jsx-141781163 nav.jsx-141781163{position:fixed;overflow-y:scroll;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:256px;height:calc(100vh - 144px);padding:6px 0 56px 56px;}",".documentation__sidebar-heading.jsx-141781163{color:#999999;text-transform:uppercase;font-size:1.2rem;margin-bottom:12px;}",".documentation__sidebar.jsx-141781163 nav.jsx-141781163 a.active.jsx-141781163{font-weight:600;}","@media only screen and (max-width:912px){.documentation__sidebar.jsx-141781163{display:none;}}"]}))}}]);return n}(o.a.Component);function Q(){Q=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e};return Q.apply(this,arguments)}function Y(e,n){if(null==e)return{};var a={};var t=Object.keys(e);var o,r;for(r=0;r<t.length;r++){o=t[r];if(n.indexOf(o)>=0)continue;a[o]=e[o]}if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(r=0;r<m.length;r++){o=m[r];if(n.indexOf(o)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,o))continue;a[o]=e[o]}}return a}var K=function e(n){var a=n.children,t=Y(n,["children"]);return o.a.createElement("h1",Q({},t,{className:"jsx-2234459629 "+(null!=t.className&&t.className||"")}),a,o.a.createElement(s.a,{styleId:"2234459629",css:[".jsx-2234459629{font-size:2.6rem;font-weight:400;margin-top:0;}"]}))};var ee=function e(n){var a=n.children,t=Y(n,["children"]);return o.a.createElement("h2",Q({},t,{className:"jsx-3557574343 "+(null!=t.className&&t.className||"")}),a,o.a.createElement(s.a,{styleId:"3557574343",css:[".jsx-3557574343{font-size:2.4rem;font-weight:500;}"]}))};var ne=function e(n){var a=n.children,t=Y(n,["children"]);return o.a.createElement("h3",Q({},t,{className:"jsx-2439276997 "+(null!=t.className&&t.className||"")}),a,o.a.createElement(s.a,{styleId:"2439276997",css:[".jsx-2439276997{font-size:2rem;font-weight:600;}"]}))};var ae=function e(n){var a=n.children,t=Y(n,["children"]);return o.a.createElement("h4",Q({},t,{className:"jsx-2148262467 "+(null!=t.className&&t.className||"")}),a,o.a.createElement(s.a,{styleId:"2148262467",css:[".jsx-2148262467{font-size:1.6rem;font-weight:600;}"]}))};function te(){te=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e};return te.apply(this,arguments)}function oe(e,n){if(null==e)return{};var a={};var t=Object.keys(e);var o,r;for(r=0;r<t.length;r++){o=t[r];if(n.indexOf(o)>=0)continue;a[o]=e[o]}if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(r=0;r<m.length;r++){o=m[r];if(n.indexOf(o)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,o))continue;a[o]=e[o]}}return a}var re=function e(n){var a=n.children,t=oe(n,["children"]);return o.a.createElement("blockquote",te({},t,{className:"jsx-2455155431 "+(null!=t.className&&t.className||"")}),a,o.a.createElement(s.a,{styleId:"2455155431",css:["blockquote.jsx-2455155431{padding:14px 0;border-left:6px solid #000;margin-left:0;padding-left:32px;}","blockquote.jsx-2455155431 p{margin:0;}"]}))};var me=function(){return o.a.createElement("svg",{width:"11px",height:"11px",viewBox:"0 0 11 11",version:"1.1"},o.a.createElement("path",{d:"M10.37 3.674L8.542 5.5a2.142 2.142 0 0 1-1.819.602l1.21-1.21 1.827-1.827A1.292 1.292 0 0 0 7.935 1.24L6.109 3.065l-1.211 1.21A2.142 2.142 0 0 1 5.5 2.458L7.326.63a2.15 2.15 0 1 1 3.043 3.043zM6.716 4.892L4.891 6.718l-.609-.61L6.11 4.284l.608.609zM1.24 7.935A1.291 1.291 0 0 0 3.065 9.76l1.826-1.826 1.21-1.21A2.141 2.141 0 0 1 5.5 8.542L3.674 10.37A2.151 2.151 0 1 1 .63 7.326L2.457 5.5a2.141 2.141 0 0 1 1.819-.602l-1.21 1.21-1.827 1.827z",fill:"#9B9B9B",fillRule:"evenodd"}))};function le(e){le="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(n){return typeof n}:function e(n){return n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};return le(e)}function ce(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};var t=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})));t.forEach(function(n){pe(e,n,a[n])})}return e}function pe(e,n,a){n in e?Object.defineProperty(e,n,{value:a,enumerable:true,configurable:true,writable:true}):e[n]=a;return e}function se(e,n){if(null==e)return{};var a={};var t=Object.keys(e);var o,r;for(r=0;r<t.length;r++){o=t[r];if(n.indexOf(o)>=0)continue;a[o]=e[o]}if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(r=0;r<m.length;r++){o=m[r];if(n.indexOf(o)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,o))continue;a[o]=e[o]}}return a}function ie(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function ge(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||false;t.configurable=true;"value"in t&&(t.writable=true);Object.defineProperty(e,t.key,t)}}function ue(e,n,a){n&&ge(e.prototype,n);a&&ge(e,a);return e}function de(e,n){if(n&&("object"===le(n)||"function"===typeof n))return n;return Ee(e)}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var fe=function(e){he(n,e);function n(){ie(this,n);return de(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}ue(n,[{key:"render",value:function e(){var n=this.props,a=n.component,t=n.className,r=n.children,m=se(n,["component","className","children"]);return o.a.cloneElement(a,ce({className:[t,a.props.className||""].join(" ")},m),r)}}]);return n}(o.a.Component);var Te=function(e){var n=e.offsetTop;var a=e.children;var t=a.props.children||"";var r=e.id;var m=t;if(null==r){Array.isArray(t)&&(m=t.map(function(e){return"object"===le(e)?e.props.children:e}).join(""));r=m.toLowerCase().replace(/\s/g,"-").replace(/[?!]/g,"")}var l=null!=n?{marginTop:-n+"px",paddingTop:n+"px"}:null;return o.a.createElement(fe,{className:e.lean?"lean":"",component:a,"data-components-heading":true},o.a.createElement("span",{id:r,style:l,className:"jsx-573693548 target"}),o.a.createElement("a",{href:"#"+r,className:"jsx-573693548"},t),o.a.createElement("span",{className:"jsx-573693548 permalink"},o.a.createElement(me,null)),o.a.createElement(s.a,{styleId:"573693548",css:["a.jsx-573693548{border-bottom:1px solid transparent;color:inherit;-webkit-text-decoration:none;text-decoration:none;}","a.jsx-573693548:hover{border-bottom-color:inherit;}","h1[data-components-heading] a.jsx-573693548::before{content:'# ';}","h2[data-components-heading] a.jsx-573693548::before{content:'## ';}","h3[data-components-heading] a.jsx-573693548::before{content:'### ';}",".lean[data-components-heading] a.jsx-573693548::before{content:'';}","h1[data-components-heading]::before,h2[data-components-heading]::before,h3[data-components-heading]::before,h4[data-components-heading]::before{display:none;}",".target.jsx-573693548{display:block;margin-top:-20px;padding-top:20px;visibility:hidden;position:absolute;}",".permalink.jsx-573693548{text-align:center;vertical-align:middle;visibility:hidden;display:none;}","a.jsx-573693548:hover~.permalink.jsx-573693548{visibility:visible;}","@media (min-width:992px){a.jsx-573693548{margin-right:10px;}.permalink.jsx-573693548{display:inline-block;}}"]}))};var Me=a(85);var De=a.n(Me);var Xe=a(51);var Ne=a.n(Xe);var xe=a(86);var be=a(87);function ve(e){ve="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(n){return typeof n}:function e(n){return n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};return ve(e)}function ye(e){return we(e)||je(e)||Ce()}function Ce(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function je(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function we(e){if(Array.isArray(e)){for(var n=0,a=new Array(e.length);n<e.length;n++)a[n]=e[n];return a}}function ke(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _e(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||false;t.configurable=true;"value"in t&&(t.writable=true);Object.defineProperty(e,t.key,t)}}function Se(e,n,a){n&&_e(e.prototype,n);a&&_e(e,a);return e}function Ie(e,n){if(n&&("object"===ve(n)||"function"===typeof n))return n;return Pe(e)}function Re(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}"undefined"!==typeof window&&a(270);var Oe=Ne()(De.a.start,200);xe["a"].on("routeChangeStart",Oe);xe["a"].on("routeChangeComplete",function(e){Object(be["a"])(e);Oe.cancel();De.a.done()});xe["a"].on("routeChangeError",function(){Oe.cancel();De.a.done()});function Le(e){var n=g.a.pathname,a=g.a.query;var t=Object(E["parse"])(location.href);t.hash=e;g.a.router.changeState("replaceState",Object(E["format"])({pathname:n,query:a}),Object(E["format"])(t))}var ze=function(e){Re(n,e);function n(e){var a;ke(this,n);a=Ie(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));Object.defineProperty(Pe(a),"updateSelected",{configurable:true,enumerable:true,writable:true,value:function e(n){a.setState({currentSelection:n})}});a.state={currentSelection:null};a.contentNode=null;a.observer=null;a.updateSelected=a.updateSelected.bind(Pe(a));a.onHashChange=a.onHashChange.bind(Pe(a));return a}Se(n,[{key:"componentDidMount",value:function e(){var n=this;window.addEventListener("hashchange",this.onHashChange);var a=ye(this.contentNode.querySelectorAll("[id]"));var t=new Set;this.observer=new IntersectionObserver(function(e){var o=true;var r=false;var m=void 0;try{for(var l=e[Symbol.iterator](),c;!(o=(c=l.next()).done);o=true){var p=c.value;var s=p.isIntersecting,i=p.target;s?t.add(i):t.delete(i)}}catch(e){r=true;m=e}finally{try{o||null==l.return||l.return()}finally{if(r)throw m}}if(!t.size)return;var g=ye(t).sort(function(e,n){return a.indexOf(e)-a.indexOf(n)});var u="#"+(g[0].id||"");if(location.hash!==u){Le(u);n.updateSelected(u)}});var o=true;var r=false;var m=void 0;try{for(var l=a[Symbol.iterator](),c;!(o=(c=l.next()).done);o=true){var p=c.value;this.observer.observe(p)}}catch(e){r=true;m=e}finally{try{o||null==l.return||l.return()}finally{if(r)throw m}}var s=window.location.hash;this.setState({currentSelection:s})}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("hashchange",this.onHashChange);this.observer.disconnect();this.observer=null}},{key:"onHashChange",value:function e(){this.updateSelected(window.location.hash)}},{key:"render",value:function e(){var n=this;return o.a.createElement(t["Fragment"],null,o.a.createElement(D,{title:"Getting Started"},o.a.createElement("style",{dangerouslySetInnerHTML:{__html:'\n              html {\n                height: 100%;\n                box-sizing: border-box;\n                font-size: 62.5%;\n              }\n\n              *,\n              *:before,\n              *:after {\n                box-sizing: inherit;\n              }\n\n              body {\n                position: relative;\n                min-height: 100%;\n                margin: 0;\n                padding-bottom: 6rem;\n                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;\n                text-rendering: optimizeLegibility;\n                line-height: 1.5;\n                font-size: 1.6rem;\n              }\n\n              a {\n                -webkit-tap-highlight-color: rgba(0,0,0,0);\n              }\n\n              html, body {\n                background-color: #FFF;\n                color: #000;\n              }\n\n              ::selection {\n                background-color: #000;\n                color: #FFF;\n              }\n            '}})),o.a.createElement(y,null),o.a.createElement("div",{className:"jsx-790107873 documentation"},o.a.createElement($,{updateSelected:this.updateSelected,currentSelection:this.state.currentSelection}),o.a.createElement("div",{className:"jsx-790107873 documentation__content"},o.a.createElement("div",{className:"jsx-790107873 documentation__header"},o.a.createElement(K,{active:"something"},this.props.meta.title)),o.a.createElement("div",{ref:function e(a){return n.contentNode=a},className:"jsx-790107873 documentation__content"},this.props.children)),o.a.createElement(s.a,{styleId:"790107873",css:[".documentation.jsx-790107873{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-top:144px;}",".documentation__sidebar.jsx-790107873{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-left:56px;}",".documentation__header.jsx-790107873 h1.jsx-790107873{margin-top:0;}",".documentation__content.jsx-790107873{width:calc(100vw - 312px);max-width:600px;padding-right:56px;}","@media only screen and (max-width:912px){.documentation.jsx-790107873{padding-top:0px;}.documentation__content.jsx-790107873{width:calc(100vw - 10px);padding-right:5px;padding-left:5px;}}"]})))}}]);return n}(t["Component"]);var qe=function e(n){var a=n.children;return o.a.createElement("div",{className:"jsx-2821545348"},o.a.createElement(Te,{lean:true},o.a.createElement(ee,null,a)),o.a.createElement(s.a,{styleId:"2821545348",css:["div.jsx-2821545348{margin:40px 0 0 0;}"]}))};var Ae=function e(n){var a=n.children;return o.a.createElement("div",{className:"jsx-276056394"},o.a.createElement(Te,{lean:true},o.a.createElement(ne,null,a)),o.a.createElement(s.a,{styleId:"276056394",css:["div.jsx-276056394{margin:30px 0 0 0;}"]}))};var He={h1:K,h2:qe,h3:Ae,h4:ae,blockquote:re,code:C,inlineCode:j,a:X};var Ue=n["default"]=function(){return o.a.createElement(ze,{meta:l},o.a.createElement(c,{components:He}))}},222:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.MDXTag=void 0;var t=a(223);var o=r(t);function r(e){return e&&e.__esModule?e:{default:e}}n.MDXTag=o.default},223:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:true});var t=a(0);var o=l(t);var r=a(6);var m=l(r);function l(e){return e&&e.__esModule?e:{default:e}}var c={inlineCode:"code",wrapper:"div"};n.default=function(e){var n=e.name,a=e.parentName,t=e.props,r=void 0===t?{}:t,m=e.children,l=e.components,p=void 0===l?{}:l;var s=p[a+"."+n]||p[n]||c[n]||n;return o.default.createElement(s,r,m)}},268:function(e,n,a){var t=a(269);var o={ease:t(.25,.1,.25,1),easeIn:t(.42,0,1,1),easeOut:t(0,0,.58,1),easeInOut:t(.42,0,.58,1),linear:t(0,0,1,1)};e.exports=r;function r(e,n,a){var t=Object.create(null);var r=Object.create(null);a=a||{};var c="function"===typeof a.easing?a.easing:o[a.easing];if(!c){a.easing&&console.warn("Unknown easing function in amator: "+a.easing);c=o.ease}var p="function"===typeof a.step?a.step:m;var s="function"===typeof a.done?a.done:m;var i=l(a.scheduler);var g=Object.keys(n);g.forEach(function(a){t[a]=e[a];r[a]=n[a]-e[a]});var u=a.duration||400;var d=Math.max(1,.06*u);var E;var h=0;E=i.next(T);return{cancel:f};function f(){i.cancel(E);E=0}function T(){var n=c(h/d);h+=1;M(n);if(h<=d){E=i.next(T);p(e)}else{E=0;setTimeout(function(){s(e)},0)}}function M(n){g.forEach(function(a){e[a]=r[a]*n+t[a]})}}function m(){}function l(e){if(!e){var n="undefined"!==typeof window&&window.requestAnimationFrame;return n?c():p()}if("function"!==typeof e.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!==typeof e.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return e}function c(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function p(){return{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}},269:function(e,n){var a=4;var t=.001;var o=1e-7;var r=10;var m=11;var l=1/(m-1);var c="function"===typeof Float32Array;function p(e,n){return 1-3*n+3*e}function s(e,n){return 3*n-6*e}function i(e){return 3*e}function g(e,n,a){return((p(n,a)*e+s(n,a))*e+i(n))*e}function u(e,n,a){return 3*p(n,a)*e*e+2*s(n,a)*e+i(n)}function d(e,n,a,t,m){var l,c,p=0;do{c=n+(a-n)/2;l=g(c,t,m)-e;l>0?a=c:n=c}while(Math.abs(l)>o&&++p<r);return c}function E(e,n,t,o){for(var r=0;r<a;++r){var m=u(n,t,o);if(0===m)return n;var l=g(n,t,o)-e;n-=l/m}return n}function h(e){return e}e.exports=function e(n,a,o,r){if(!(0<=n&&n<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");if(n===a&&o===r)return h;var p=c?new Float32Array(m):new Array(m);for(var s=0;s<m;++s)p[s]=g(s*l,n,o);function i(e){var a=0;var r=1;var c=m-1;for(;r!==c&&p[r]<=e;++r)a+=l;--r;var s=(e-p[r])/(p[r+1]-p[r]);var i=a+s*l;var g=u(i,n,o);return g>=t?E(e,i,n,o):0===g?i:d(e,a,a+l,n,o)}return function e(n){if(0===n)return 0;if(1===n)return 1;return g(i(n),a,r)}}},270:function(e,n){(function(e,n){"use strict";if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype){"isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}var a=[];function t(e){this.time=e.time;this.target=e.target;this.rootBounds=e.rootBounds;this.boundingClientRect=e.boundingClientRect;this.intersectionRect=e.intersectionRect||i();this.isIntersecting=!!e.intersectionRect;var n=this.boundingClientRect;var a=n.width*n.height;var t=this.intersectionRect;var o=t.width*t.height;this.intersectionRatio=a?o/a:this.isIntersecting?1:0}function o(e,n){var a=n||{};if("function"!=typeof e)throw new Error("callback must be a function");if(a.root&&1!=a.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=m(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=e;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(a.rootMargin);this.thresholds=this._initThresholds(a.threshold);this.root=a.root||null;this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}o.prototype.THROTTLE_TIMEOUT=100;o.prototype.POLL_INTERVAL=null;o.prototype.USE_MUTATION_OBSERVER=true;o.prototype.observe=function(e){var n=this._observationTargets.some(function(n){return n.element==e});if(n)return;if(!(e&&1==e.nodeType))throw new Error("target must be an Element");this._registerInstance();this._observationTargets.push({element:e,entry:null});this._monitorIntersections();this._checkForIntersections()};o.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(n){return n.element!=e});if(!this._observationTargets.length){this._unmonitorIntersections();this._unregisterInstance()}};o.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorIntersections();this._unregisterInstance()};o.prototype.takeRecords=function(){var e=this._queuedEntries.slice();this._queuedEntries=[];return e};o.prototype._initThresholds=function(e){var n=e||[0];Array.isArray(n)||(n=[n]);return n.sort().filter(function(e,n,a){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==a[n-1]})};o.prototype._parseRootMargin=function(e){var n=e||"0px";var a=n.split(/\s+/).map(function(e){var n=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!n)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(n[1]),unit:n[2]}});a[1]=a[1]||a[0];a[2]=a[2]||a[0];a[3]=a[3]||a[1];return a};o.prototype._monitorIntersections=function(){if(!this._monitoringIntersections){this._monitoringIntersections=true;if(this.POLL_INTERVAL)this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL);else{l(e,"resize",this._checkForIntersections,true);l(n,"scroll",this._checkForIntersections,true);if(this.USE_MUTATION_OBSERVER&&"MutationObserver"in e){this._domObserver=new MutationObserver(this._checkForIntersections);this._domObserver.observe(n,{attributes:true,childList:true,characterData:true,subtree:true})}}}};o.prototype._unmonitorIntersections=function(){if(this._monitoringIntersections){this._monitoringIntersections=false;clearInterval(this._monitoringInterval);this._monitoringInterval=null;c(e,"resize",this._checkForIntersections,true);c(n,"scroll",this._checkForIntersections,true);if(this._domObserver){this._domObserver.disconnect();this._domObserver=null}}};o.prototype._checkForIntersections=function(){var e=this._rootIsInDom();var n=e?this._getRootRect():i();this._observationTargets.forEach(function(a){var o=a.element;var m=s(o);var l=this._rootContainsTarget(o);var c=a.entry;var p=e&&l&&this._computeTargetAndRootIntersection(o,n);var i=a.entry=new t({time:r(),target:o,boundingClientRect:m,rootBounds:n,intersectionRect:p});c?e&&l?this._hasCrossedThreshold(c,i)&&this._queuedEntries.push(i):c&&c.isIntersecting&&this._queuedEntries.push(i):this._queuedEntries.push(i)},this);this._queuedEntries.length&&this._callback(this.takeRecords(),this)};o.prototype._computeTargetAndRootIntersection=function(a,t){if("none"==e.getComputedStyle(a).display)return;var o=s(a);var r=o;var m=u(a);var l=false;while(!l){var c=null;var i=1==m.nodeType?e.getComputedStyle(m):{};if("none"==i.display)return;if(m==this.root||m==n){l=true;c=t}else m!=n.body&&m!=n.documentElement&&"visible"!=i.overflow&&(c=s(m));if(c){r=p(c,r);if(!r)break}m=u(m)}return r};o.prototype._getRootRect=function(){var e;if(this.root)e=s(this.root);else{var a=n.documentElement;var t=n.body;e={top:0,left:0,right:a.clientWidth||t.clientWidth,width:a.clientWidth||t.clientWidth,bottom:a.clientHeight||t.clientHeight,height:a.clientHeight||t.clientHeight}}return this._expandRectByRootMargin(e)};o.prototype._expandRectByRootMargin=function(e){var n=this._rootMarginValues.map(function(n,a){return"px"==n.unit?n.value:n.value*(a%2?e.width:e.height)/100});var a={top:e.top-n[0],right:e.right+n[1],bottom:e.bottom+n[2],left:e.left-n[3]};a.width=a.right-a.left;a.height=a.bottom-a.top;return a};o.prototype._hasCrossedThreshold=function(e,n){var a=e&&e.isIntersecting?e.intersectionRatio||0:-1;var t=n.isIntersecting?n.intersectionRatio||0:-1;if(a===t)return;for(var o=0;o<this.thresholds.length;o++){var r=this.thresholds[o];if(r==a||r==t||r<a!==r<t)return true}};o.prototype._rootIsInDom=function(){return!this.root||g(n,this.root)};o.prototype._rootContainsTarget=function(e){return g(this.root||n,e)};o.prototype._registerInstance=function(){a.indexOf(this)<0&&a.push(this)};o.prototype._unregisterInstance=function(){var e=a.indexOf(this);-1!=e&&a.splice(e,1)};function r(){return e.performance&&performance.now&&performance.now()}function m(e,n){var a=null;return function(){a||(a=setTimeout(function(){e();a=null},n))}}function l(e,n,a,t){"function"==typeof e.addEventListener?e.addEventListener(n,a,t||false):"function"==typeof e.attachEvent&&e.attachEvent("on"+n,a)}function c(e,n,a,t){"function"==typeof e.removeEventListener?e.removeEventListener(n,a,t||false):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+n,a)}function p(e,n){var a=Math.max(e.top,n.top);var t=Math.min(e.bottom,n.bottom);var o=Math.max(e.left,n.left);var r=Math.min(e.right,n.right);var m=r-o;var l=t-a;return m>=0&&l>=0&&{top:a,bottom:t,left:o,right:r,width:m,height:l}}function s(e){var n;try{n=e.getBoundingClientRect()}catch(e){}if(!n)return i();n.width&&n.height||(n={top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.right-n.left,height:n.bottom-n.top});return n}function i(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function g(e,n){var a=n;while(a){if(a==e)return true;a=u(a)}return false}function u(e){var n=e.parentNode;if(n&&11==n.nodeType&&n.host)return n.host;return n}e.IntersectionObserver=o;e.IntersectionObserverEntry=t})(window,document)}},[220]);return{page:e.default}});